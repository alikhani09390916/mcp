# راهنمای نصب و راه‌اندازی MCP Server در Termux

این سند شامل راهنمای گام به گام نصب و راه‌اندازی MCP Server (Multi-purpose Command Processor) در محیط Termux اندروید است. MCP Server به شما این امکان را می‌دهد که یک چت‌بات هوش مصنوعی قدرتمند با قابلیت‌های مدیریت پروژه و اجرای دستورات ترمینال را در دستگاه اندرویدی خود داشته باشید.

## ۱. پیش‌نیازها

برای راه‌اندازی MCP Server، شما به موارد زیر نیاز دارید:

*   **دستگاه اندرویدی:** یک گوشی یا تبلت اندرویدی با حداقل ۲ گیگابایت رم (۴ گیگابایت یا بیشتر توصیه می‌شود).
*   **Termux:** اپلیکیشن Termux نصب شده بر روی دستگاه اندرویدی شما. می‌توانید آن را از F-Droid یا GitHub دانلود کنید.
*   **اتصال به اینترنت:** برای دانلود پکیج‌ها و ارتباط با Gemini API.
*   **API Key از Google AI Studio:** برای استفاده از مدل‌های Gemini، شما به یک API Key نیاز دارید. این کلید را می‌توانید به صورت رایگان از [Google AI Studio](https://aistudio.google.com/app/apikey) دریافت کنید.

## ۲. نصب Termux و پکیج‌های اولیه

۱.  **نصب Termux:** اگر Termux را نصب نکرده‌اید، آن را از [F-Droid](https://f-droid.org/packages/com.termux/) یا [GitHub](https://github.com/termux/termux-app/releases) دانلود و نصب کنید.

۲.  **به‌روزرسانی Termux:** پس از نصب، Termux را باز کرده و دستورات زیر را برای به‌روزرسانی پکیج‌ها اجرا کنید:

    ```bash
    pkg update && pkg upgrade -y
    ```

۳.  **نصب پایتون و Git:** MCP Server با پایتون نوشته شده است. همچنین برای کلون کردن پروژه از Git استفاده خواهیم کرد. دستورات زیر را برای نصب آن‌ها اجرا کنید:

    ```bash
    pkg install python git -y
    ```

## ۳. دریافت API Key از Google AI Studio

۱.  به وب‌سایت [Google AI Studio](https://aistudio.google.com/app/apikey) بروید.
۲.  با حساب Google خود وارد شوید.
۳.  یک API Key جدید ایجاد کنید. این کلید را در مکانی امن ذخیره کنید، زیرا فقط یک بار نمایش داده می‌شود.

## ۴. راه‌اندازی MCP Server

۱.  **کلون کردن پروژه:** فایل‌های پروژه MCP Server را از مخزن Git (در آینده اینجا لینک مخزن قرار می‌گیرد) به Termux کلون کنید. فرض می‌کنیم پروژه در مسیر `/home/ubuntu` قرار دارد. شما باید فایل `mcp_server.py` و `requirements.txt` را در Termux خود داشته باشید. برای این منظور، می‌توانید فایل `mcp_server.py` و `requirements.txt` را که در این پروژه ساخته شده‌اند، به دستگاه اندرویدی خود منتقل کنید.

۲.  **نصب وابستگی‌های پایتون:** وارد دایرکتوری پروژه MCP Server شوید و وابستگی‌های پایتون را نصب کنید:

    ```bash
    cd /path/to/mcp_server_directory  # مسیر دایرکتوری پروژه شما
    pip install -r requirements.txt
    ```

    (توجه: فایل `requirements.txt` باید شامل `google-generativeai` باشد.)

۳.  **تنظیم API Key:** قبل از اجرای سرور، باید API Key خود را به عنوان یک متغیر محیطی تنظیم کنید. این کار را می‌توانید به دو روش انجام دهید:

    *   **روش موقت (برای یک جلسه Termux):**

        ```bash
        export GEMINI_API_KEY="YOUR_API_KEY_HERE"
        ```

        (به جای `YOUR_API_KEY_HERE`، کلید API خود را قرار دهید.)

    *   **روش دائمی (برای هر بار باز کردن Termux):**

        فایل `.bashrc` یا `.zshrc` خود را ویرایش کرده و خط بالا را به انتهای آن اضافه کنید. برای ویرایش می‌توانید از `nano` یا `vim` استفاده کنید:

        ```bash
        nano ~/.bashrc
        # یا
        nano ~/.zshrc
        ```

        پس از اضافه کردن خط، فایل را ذخیره کرده و Termux را مجدداً راه‌اندازی کنید یا دستور `source ~/.bashrc` (یا `.zshrc`) را اجرا کنید.

۴.  **اجرای MCP Server:** اکنون می‌توانید MCP Server را اجرا کنید:

    ```bash
    python mcp_server.py
    ```

## ۵. استفاده از MCP Server

پس از اجرای موفقیت‌آمیز، MCP Server از شما می‌خواهد که یک نام پروژه جدید وارد کنید یا یک پروژه موجود را بارگذاری کنید. سپس می‌توانید با چت‌بات تعامل داشته باشید و دستورات ترمینال را اجرا کنید.

**دستورات اصلی:**

*   `run command: <your command>`: برای اجرای دستورات شل در Termux. مثال: `run command: ls -l`
*   `new`: برای ایجاد یک پروژه جدید.
*   `delete`: برای حذف یک پروژه موجود.
*   `help`: نمایش لیست دستورات.
*   `exit`: ذخیره پروژه فعلی و خروج از MCP Server.

**تعامل با چت‌بات:**

برای هر سوال یا درخواستی که با دستورات بالا مطابقت نداشته باشد، MCP Server از مدل Gemini برای پاسخگویی استفاده خواهد کرد. شما می‌توانید سوالات مربوط به برنامه‌نویسی، مدیریت Termux، یا هر موضوع دیگری را از آن بپرسید.

## ۶. مدیریت پروژه و حافظه

MCP Server به صورت خودکار تاریخچه مکالمات و وضعیت پروژه شما را ذخیره می‌کند. هر پروژه دارای یک دایرکتوری جداگانه در مسیر `mcp_projects` (در همان دایرکتوری که `mcp_server.py` قرار دارد) خواهد بود. این به شما امکان می‌دهد که بین پروژه‌های مختلف جابجا شوید و کارهای خود را از جایی که متوقف کرده‌اید، ادامه دهید.

## ۷. بهینه‌سازی و نکات تکمیلی

*   **مصرف منابع:** مدل‌های LLM می‌توانند مصرف رم و CPU بالایی داشته باشند. اگر با کندی مواجه شدید، ممکن است نیاز به استفاده از مدل‌های سبک‌تر Gemini (مانند `gemini-1.5-flash` که در کد استفاده شده است) یا بهینه‌سازی بیشتر کد داشته باشید.
*   **اتصال به اینترنت:** ارتباط با Gemini API نیاز به اتصال پایدار به اینترنت دارد.
*   **امنیت API Key:** هرگز API Key خود را در کد به صورت مستقیم قرار ندهید. همیشه از متغیرهای محیطی استفاده کنید.

با دنبال کردن این راهنما، شما قادر خواهید بود MCP Server خود را در Termux راه‌اندازی کرده و از قابلیت‌های آن بهره‌مند شوید.


